{"version":3,"sources":["../../file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/AdapterContent.ts","../../file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/test-list/file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/test-list/BackButton.ts","../../file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/BackPackUI.ts","../../file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/ButtonScaler.ts","../../file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/ChallengeUI.ts","../../file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/ChargeUI.ts","../../file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/EnergyCounter.ts","../../file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/rocker/file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/rocker/head-scale.ts","../../file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/HeroSlot.ts","../../file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/HomeUI.ts","../../file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/ItemList.ts","../../file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/ItemTemplate.ts","../../file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/test-list/file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/test-list/ListItem.ts","../../file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/tabs/file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/tabs/MainMenu.ts","../../file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/tabs/file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/tabs/MenuSidebar.ts","../../file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/migrate-canvas.ts","../../file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/PanelTransition.ts","../../file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/PanelType.ts","../../file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/rocker/file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/rocker/rockerCtrl.ts","../../file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/test-list/file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/test-list/SceneList.ts","../../file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/ShopUI.ts","../../file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/SubBtnsUI.ts","../../file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/tabs/file:/D:/Project/Cocos/cocos-example-ui-3.0/assets/scripts/tabs/TabCtrl.ts"],"names":["ccclass","_decorator","property","type","AdapterContent","Node","start","sizeChanged","scroll","on","EventType","SIZE_CHANGED","contentSize","getComponent","UITransform","pos","node","position","setPosition","Vec3","x","height","Component","BackButton","saveOffset","_scrollNode","_offset","_scrollCom","getScrollOffset","y","saveIndex","index","_sceneIndex","refreshButton","_prevNode","active","_nextNode","__preload","sceneInfo","game","_sceneInfos","firstIndex","lastIndex","sceneString","i","length","url","lastIndexOf","substring","sceneArray","push","addPersistRootNode","getParent","getChildByPath","ScrollViewComponent","_blockInput","getChildByName","backToList","director","loadScene","_this","_content","Layout","updateLayout","scrollToOffset","offset","nextscene","updateSceneIndex","getSceneName","prescene","next","value","BackPackUI","Prefab","ScrollView","home","heroSlots","init","totalCount","heroSlot","addHeroSlot","instantiate","slotPrefab","scrollView","content","addChild","show","emit","hide","ButtonScaler","initScale","button","_scale","_lastScale","_start","onLoad","self","scale","Button","tweenDown","tween","tewenUp","getScale","to","transDuration","scaleTo","easing","set","onTouchDown","event","onTouchUp","stop","SystemEventType","TOUCH_START","TOUCH_END","TOUCH_CANCEL","update","equals","setScale","ChallengeUI","_rot","roleClkArea","TOUCH_MOVE","_rotateRole","role","eulerAngles","getDeltaX","ChargeUI","parentBtns","EnergyCounter","Label","ProgressBar","_timer","dt","ratio","timeToRecover","progressBar","progress","currentCount","timeLeft","Math","floor","labelCount","string","labelTimer","toString","HeadScale","Camera","_lastWPos","_pos","wpos","target","worldPosition","camera","_camera","convertToUINode","parent","transformMat4","matView","distance","abs","z","getRandomInt","min","max","random","HeroSlot","SpriteFrame","Sprite","refresh","bgIdx","sfBorders","heroIdx","sfHeroes","starIdx","spStars","rankIdx","sfRanks","attIdx","sfAttributes","levelIdx","labelLevel","spRank","spriteFrame","refreshStars","spBorder","spAttribute","spHero","count","enabled","HomeUI","Animation","ShopUI","curPanel","PanelType","Home","backPackUI","shopUI","Shop","challengeUI","scheduleOnce","_this2","menuAnim","play","gotoShop","gotoHome","Item","ItemList","items","item","itemPrefab","data","ItemTemplate","id","icon","iconSF","itemName","itemPrice","ListItem","_name","label","onload","getSiblingIndex","getComponentInChildren","updateItem","interactable","idx","name","MainMenu","MenuSidebar","panelWidth","tabSwitchDuration","curPanelIdx","sidebar","roller","switchPanel","curTabIdx","tabs","mainMenu","tabIcons","tab","cc","tabPrefab","TabCtrl","container","turnBig","highlight","tabWidth","tabPressed","turnSmall","customLayerMask","builtinLayerMask","Director","EVENT_AFTER_SCENE_LAUNCH","roots","getScene","_director$getScene","children","allCanvases","_director$getScene2","getComponentsInChildren","Canvas","filter","cameraComponent","allCameras","_director$getScene3","usedLayer","forEach","visibility","persistCanvas","l","root","isPersistRootNode","canvases","val","isLayerCollided","find","availableLayers","lastAvailableLayer","setChildrenLayer","layer","setParentEngine","prototype","setParent","keepWorldTransform","call","getCanvasCameraLayer","canvas","PanelTransition","outOfWorld","_color","Color","startFadeIn","renderComp","UIRenderable","color","a","onFadeOutFinish","Enum","TOUCH_RADIUS","ROLE_MOVE_FRAME","_tempPos","_tempDelta","Vec2","Horizontal","MOVE_DELTA","RockerCtrl","_isTouch","_touchPos","_startPos","_movePos","_animComp","_animState","ctrlSprite","originPos","systemEvent","touchStart","touchMove","touchEnd","onDestroy","off","touch","changeState","getUILocation","setWorldPosition","subtract","deltaRadian","angle","PI","rot","sign","multiply2f","add","radian","cos","sin","translate","SceneManager","_panelType","_home","panelType","anim","chargeUI","btnsNode","onFinishShow","onFinishHide","SubBtnsUI","btnShowSub","btnHideSub","showSubBtns","btnContainer","subBtnsAnim","hideSubBtns","onFinishAnim","finishFold","tabInfo","onPressed","bind","arrow","p"],"mappings":"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","file":"all.js","sourcesContent":["\nimport { _decorator, Component, Node, ScrollView, UITransform, Vec3 } from 'cc';\nconst { ccclass, property, type } = _decorator;\n\n@ccclass('AdapterContent')\nexport class AdapterContent extends Component {\n    @type(Node)\n    scroll: Node = null!;\n\n    start () {\n        this.sizeChanged();\n        this.scroll.on(Node.EventType.SIZE_CHANGED, this.sizeChanged, this);\n    }\n\n    sizeChanged(){\n        const contentSize = this.scroll.getComponent(UITransform)!.contentSize;\n        const pos = this.node.position;\n        this.node.setPosition(new Vec3(pos.x, contentSize.height / 2));\n    }\n\n    // update (deltaTime: number) {\n    //     // [4]\n    // }\n}\n\n/**\n * [1] Class member could be defined like this.\n * [2] Use `property` decorator if your want the member to be serializable.\n * [3] Your initialization goes here.\n * [4] Your update function goes here.\n *\n * Learn more about scripting: https://docs.cocos.com/creator/3.0/manual/en/scripting/\n * Learn more about CCClass: https://docs.cocos.com/creator/3.0/manual/en/scripting/ccclass.html\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.0/manual/en/scripting/life-cycle-callbacks.html\n */\n","import { _decorator, Button, Component, director, game, Node, ScrollViewComponent, Vec3, Layout } from 'cc';\nconst { ccclass, property } = _decorator;\nimport { sceneArray } from './SceneList';\n\n@ccclass('BackButton')\nexport class BackButton extends Component {\n\n    public static get offset () {\n        return BackButton._offset;\n    }\n\n    public static set offset ( value ) {\n        BackButton._offset = value;\n    }\n    public static _scrollNode: Node | null  = null;\n\n    public static saveOffset () {\n        if ( BackButton._scrollNode ) {\n            BackButton._offset = new Vec3(0, BackButton._scrollCom!.getScrollOffset().y, 0);\n        }\n    }\n\n    public static saveIndex ( index: number) {\n        BackButton._sceneIndex = index;\n        BackButton.refreshButton();\n    }\n\n    public static refreshButton () {\n        if (BackButton._sceneIndex === -1) {\n            BackButton._prevNode.active = false;\n            BackButton._nextNode.active = false;\n        } else {\n            BackButton._prevNode.active = true;\n            BackButton._nextNode.active = true;\n        }\n    }\n    private static _offset = new Vec3();\n    private static _scrollCom: ScrollViewComponent | null = null;\n\n    private static _sceneIndex: number = -1;\n    private static _blockInput : Node;\n    private static _prevNode: Node;\n    private static _nextNode: Node;\n\n    public __preload () {\n        // @ts-ignore\n        const sceneInfo = game._sceneInfos;\n        let firstIndex = 0;\n        let lastIndex = 0;\n        let sceneString: string = '';\n        for (let i = 0; i < sceneInfo.length; i++){\n            sceneString = sceneInfo[i].url;\n            firstIndex = sceneString.lastIndexOf('/') + 1;\n            lastIndex = sceneString.lastIndexOf('.scene');\n            sceneString = sceneString.substring(firstIndex, lastIndex);\n            if (sceneString === 'test-list') {\n                continue;\n            }\n            sceneArray.push(sceneString);\n        }\n    }\n\n    public start () {\n        game.addPersistRootNode(this.node);\n        BackButton._scrollNode = this.node.getParent()!.getChildByPath('Canvas/ScrollView') as Node;\n        if (BackButton._scrollNode) {\n            BackButton._scrollCom = BackButton._scrollNode.getComponent(ScrollViewComponent);\n        }\n        BackButton._blockInput = this.node.getChildByName('BlockInput') as Node;\n        BackButton._blockInput.active = false;\n        BackButton._prevNode = this.node.getChildByName('PrevButton') as Node;\n        BackButton._nextNode = this.node.getChildByName('NextButton') as Node;\n        if (BackButton._prevNode && BackButton._nextNode) {\n            BackButton.refreshButton();\n        }\n    }\n\n    public backToList () {\n        BackButton._blockInput.active = true;\n        director.loadScene('test-list', () => {\n            BackButton._sceneIndex = -1;\n            BackButton.refreshButton();\n            BackButton._scrollNode = this.node.getParent()!.getChildByPath('Canvas/ScrollView') as Node;\n            if (BackButton._scrollNode) {\n                BackButton._scrollCom = BackButton._scrollNode.getComponent(ScrollViewComponent);\n                // @ts-ignore\n                BackButton._scrollCom._content.getComponent(Layout).updateLayout();\n                BackButton._scrollCom!.scrollToOffset(BackButton.offset, 0.1, true);\n            }\n            BackButton._blockInput.active = false;\n        });\n    }\n\n    public nextscene () {\n        BackButton._blockInput.active = true;\n        this.updateSceneIndex(true);\n        director.loadScene(this.getSceneName(), () => {\n            BackButton._blockInput.active = false;\n        });\n    }\n\n    public prescene () {\n        BackButton._blockInput.active = true;\n        this.updateSceneIndex(false);\n        director.loadScene(this.getSceneName(), () => {\n            BackButton._blockInput.active = false;\n        });\n    }\n\n    public updateSceneIndex (next: Boolean) {\n        if (next) {\n            (BackButton._sceneIndex + 1) >= sceneArray.length ? BackButton._sceneIndex = 0 : BackButton._sceneIndex += 1;\n        }else {\n            (BackButton._sceneIndex - 1) < 0 ? BackButton._sceneIndex = sceneArray.length - 1 : BackButton._sceneIndex -= 1;\n        }\n    }\n\n    public getSceneName () {\n        return sceneArray[BackButton._sceneIndex];\n    }\n}\n","import { _decorator, Component, Prefab, ScrollView, Node, instantiate } from \"cc\";\nconst { ccclass, property } = _decorator;\nimport { HomeUI } from \"./HomeUI\";\n\n@ccclass\nexport class BackPackUI extends Component {\n    @property({\n        type: Prefab\n    })\n    slotPrefab: Prefab = null!;\n    @property({\n        type: ScrollView\n    })\n    scrollView: ScrollView = null!;\n    @property\n    totalCount = 0;\n\n    public home: HomeUI = null!;\n    public heroSlots: Node[] = [];\n\n    init(home: HomeUI) {\n        this.heroSlots.length = 0;\n        this.home = home;\n        for (let i = 0; i < this.totalCount; ++i) {\n            let heroSlot = this.addHeroSlot();\n            this.heroSlots.push(heroSlot);\n        }\n    }\n\n    addHeroSlot() {\n        let heroSlot = instantiate(this.slotPrefab);\n        this.scrollView.content!.addChild(heroSlot);\n        return heroSlot;\n    }\n\n    show() {\n        this.node.active = true;\n        this.node.emit('fade-in');\n    }\n\n    hide() {\n        this.node.active = false;\n        this.node.emit('fade-out');\n    }\n}\n","import { _decorator, Component, Vec3, Button, tween, SystemEventType, EventTouch} from \"cc\";\nconst { ccclass, property } = _decorator;\n\n@ccclass\nexport class ButtonScaler extends Component {\n    @property\n    public scaleTo = new Vec3(1.2, 1.2, 1.2);\n    @property\n    public transDuration = 0.2;\n\n    public initScale = new Vec3();\n    public button: Button | null = null;\n    private _scale = new Vec3(1, 1, 1);\n    private _lastScale = new Vec3();\n    private _start = new Vec3();\n\n    // use this for initialization\n    onLoad() {\n        var self = this;\n        self.initScale = this.node.scale;\n        self.button = self.getComponent(Button);\n        const tweenDown = tween(this._scale);\n        const tewenUp = tween(this._scale);\n        this.node.getScale(this._start);\n        tweenDown.to(this.transDuration, this.scaleTo, { easing: 'cubicInOut'});\n        tewenUp.to(this.transDuration, this._start, { easing: 'cubicInOut' });\n        this._lastScale.set(this._scale);\n        function onTouchDown(event: EventTouch) {\n            tweenDown.start();\n        }\n        function onTouchUp(event: EventTouch) {\n            tweenDown.stop();\n            tewenUp.start();\n        }\n        this.node.on(SystemEventType.TOUCH_START, onTouchDown, this);\n        this.node.on(SystemEventType.TOUCH_END, onTouchUp, this);\n        this.node.on(SystemEventType.TOUCH_CANCEL, onTouchUp, this);\n    }\n\n    update() {\n        if(!this._scale.equals(this._lastScale)){\n            this.node.setScale(this._scale);\n            this._lastScale.set(this._scale);\n        }\n    }\n}\n","import { _decorator, Component, Node, SystemEventType, EventTouch, Vec3 } from \"cc\";\nimport { HomeUI } from \"./HomeUI\";\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"ChallengeUI\")\nexport class ChallengeUI extends Component {\n    public home: HomeUI = null!;\n    @property(Node)\n    roleClkArea: Node = null!;\n    @property(Node)\n    role: Node = null!;\n\n    private _rot = new Vec3();\n\n    start () {\n        // Your initialization goes here.\n    }\n\n    init(home: HomeUI) {\n        this.home = home;\n        this.roleClkArea.on(SystemEventType.TOUCH_MOVE, this._rotateRole, this);\n        this._rot.set(this.role.eulerAngles);\n    }\n\n    show() {\n        this.node.active = true;\n        this.node.emit('fade-in');\n    }\n\n    hide() {\n        this.node.active = false;\n        this.node.emit('fade-out');\n    }\n\n    _rotateRole(event: EventTouch){\n        const y = event.getDeltaX();\n        if(y > 0){\n            this._rot.y += 5;\n        } else if (y < 0){\n            this._rot.y -= 5;\n        }\n\n        this.role.eulerAngles = this._rot;\n        this._rot.set(this.role.eulerAngles);\n    }\n}\n","import { _decorator, Component, Node } from \"cc\";\nconst { ccclass } = _decorator;\nimport { HomeUI } from \"./HomeUI\";\n\n@ccclass\nexport class ChargeUI extends Component {\n    public home: HomeUI = null!;\n    public parentBtns: Node = null!;\n    init(home: HomeUI, parentBtns: Node) {\n        this.home = home;\n        this.parentBtns = parentBtns;\n    }\n\n    show() {\n        this.node.active = true;\n        this.node.emit('fade-in');\n    }\n\n    hide() {\n        this.node.active = false;\n        this.node.emit('fade-out');\n    }\n}\n","import { _decorator, Component, Label, ProgressBar } from \"cc\";\nconst { ccclass, property } = _decorator;\n\n@ccclass\nexport class EnergyCounter extends Component{\n    @property\n    public timeToRecover = 0;\n    @property\n    public totalCount = 0;\n    @property\n    public currentCount = 0;\n    @property({\n        type: Label\n    })\n    labelTimer: Label = null!;\n    @property({\n        type: Label\n    })\n    labelCount: Label = null!;\n    @property({\n        type: ProgressBar\n    })\n    progressBar: ProgressBar = null!;\n\n    private _timer = 0;\n\n    onLoad() {\n        this._timer = 0;\n    }\n\n    update(dt: number) {\n        let ratio = this._timer / this.timeToRecover;\n        this.progressBar.progress = ratio;\n        if (this.currentCount > this.totalCount) this.currentCount = this.totalCount;\n        let timeLeft = Math.floor(this.timeToRecover - this._timer);\n        this.labelCount.string = this.currentCount + '/' + this.totalCount;\n        this.labelTimer.string = Math.floor(timeLeft / 60).toString() + ':' + (timeLeft % 60 < 10 ? '0' : '') + timeLeft % 60;\n        this._timer += dt;\n        if (this._timer >= this.timeToRecover) {\n            this._timer = 0;\n            this.currentCount++;\n        }\n    }\n}\n","import { _decorator, Component, Node, Prefab, instantiate, Vec3, Camera } from \"cc\";\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"HeadScale\")\nexport class HeadScale extends Component {\n    @property(Node)\n    target: Node = null!;\n    @property(Camera)\n    camera: Camera = null!;\n    @property\n    distance = 0;\n\n    private _lastWPos: Vec3 = new Vec3();\n    private _pos: Vec3 = new Vec3();\n\n    update(){\n        const wpos = this.target.worldPosition;\n        // @ts-ignore\n        if (!this.camera!._camera || this._lastWPos.equals(wpos)) {\n            return;\n        }\n\n        this._lastWPos.set(wpos);\n        const camera = this.camera!;\n        // [HACK]\n        // @ts-ignore\n        camera._camera.update();\n        camera.convertToUINode(wpos, this.node.parent!, this._pos);\n        this.node.setPosition(this._pos);\n        // @ts-ignore\n        Vec3.transformMat4(this._pos, this.target.worldPosition, camera._camera!.matView);\n\n        const ratio = this.distance / Math.abs(this._pos.z);\n\n        const value = Math.floor(ratio * 100) / 100;\n        this.node.setScale(value, value, 1);\n    }\n}\n","import { _decorator, Component, Label, Sprite, SpriteFrame } from \"cc\";\nconst { ccclass, property } = _decorator;\n\nconst getRandomInt = function (min: number, max: number) {\n    var ratio = Math.random();\n    return min + Math.floor((max - min) * ratio);\n};\n\n@ccclass\nexport class HeroSlot extends Component {\n    @property([SpriteFrame])\n    public sfAttributes: SpriteFrame[] = [];\n     @property([SpriteFrame])\n    public sfRanks: SpriteFrame[] = [];\n     @property([SpriteFrame])\n    public sfHeroes: SpriteFrame[] = [];\n     @property([SpriteFrame])\n    public sfBorders: SpriteFrame[] = [];\n    @property(Label)\n    public labelLevel: Label = null!;\n    @property(Sprite)\n    public spHero: Sprite = null!;\n    @property(Sprite)\n    public spRank: Sprite = null!;\n    @property(Sprite)\n    public spAttribute: Sprite = null!;\n    @property(Sprite)\n    public spBorder: Sprite = null!;\n    @property([Sprite])\n    public spStars: Sprite[] = [];\n\n    // use this for initialization\n    onLoad() {\n        this.refresh();\n    }\n\n    refresh() {\n        let bgIdx = getRandomInt(0, this.sfBorders.length);\n        let heroIdx = getRandomInt(0, this.sfHeroes.length);\n        let starIdx = getRandomInt(0, this.spStars.length);\n        let rankIdx = getRandomInt(0, this.sfRanks.length);\n        let attIdx = getRandomInt(0, this.sfAttributes.length);\n        let levelIdx = getRandomInt(0, 100);\n        this.labelLevel.string = 'LV.' + levelIdx;\n        this.spRank.spriteFrame = this.sfRanks[rankIdx];\n        this.refreshStars(starIdx);\n        this.spBorder.spriteFrame = this.sfBorders[bgIdx];\n        this.spAttribute.spriteFrame = this.sfAttributes[attIdx];\n        this.spHero.spriteFrame = this.sfHeroes[heroIdx];\n    }\n\n    refreshStars(count: number) {\n        for (let i = 0; i < this.spStars.length; ++i) {\n            if (i <= count) this.spStars[i].enabled = true;\n            else this.spStars[i].enabled = false;\n        }\n    }\n}\n","import { _decorator, Component, Node, Animation, Enum } from \"cc\";\nconst { ccclass, property } = _decorator;\nimport { BackPackUI } from \"./BackPackUI\";\nimport { ShopUI } from \"./ShopUI\";\nimport { ChallengeUI } from \"./ChallengeUI\";\nimport { PanelType } from \"./PanelType\";\n\n@ccclass\nexport class HomeUI extends Component {\n    @property(Animation)\n    menuAnim: Animation = null!;\n    @property(BackPackUI)\n    backPackUI: BackPackUI = null!;\n    @property(ShopUI)\n    shopUI: ShopUI = null!;\n    @property(ChallengeUI)\n    challengeUI: ChallengeUI = null!;\n\n    public curPanel = PanelType.Home;\n\n    // use this for initialization\n    onLoad() {\n        this.curPanel = PanelType.Home;\n        // this.menuAnim.play('menu_reset');\n    }\n\n    start() {\n        this.backPackUI.init(this);\n        this.shopUI.init(this, PanelType.Shop);\n        this.challengeUI.init(this);\n        this.scheduleOnce(() => {\n            this.menuAnim.play('menu_intro');\n        }, 0.5);\n    }\n\n    gotoShop() {\n        if (this.curPanel !== PanelType.Shop) {\n            this.shopUI.show();\n        }\n    }\n\n    gotoHome() {\n        if (this.curPanel === PanelType.Shop) {\n            this.shopUI.hide();\n            this.curPanel = PanelType.Home;\n        }\n    }\n}\n","import { _decorator, Component, SpriteFrame, Prefab, instantiate } from \"cc\";\nimport { ItemTemplate } from \"./ItemTemplate\";\nconst { ccclass, property } = _decorator;\n\n@ccclass('Item')\nexport class Item {\n    @property\n    id = 0;\n    @property\n    itemName = '';\n    @property\n    itemPrice = 0;\n    @property(SpriteFrame)\n    iconSF: SpriteFrame = null!;\n}\n\n@ccclass\nexport class ItemList extends Component {\n    @property([Item])\n    items: Item[] = [];\n    @property(Prefab)\n    itemPrefab: Prefab = null!;\n\n    onLoad() {\n        for (var i = 0; i < this.items.length; ++i) {\n            var item = instantiate(this.itemPrefab);\n            var data = this.items[i];\n            this.node.addChild(item);\n            (item.getComponent('ItemTemplate') as ItemTemplate)!.init(data);\n        }\n    }\n}\n","import { _decorator, Component, Sprite, Label } from \"cc\";\nimport { Item } from \"./ItemList\";\nconst { ccclass, property } = _decorator;\n\n@ccclass\nexport class ItemTemplate extends Component {\n    @property\n    public id = 0;\n    @property(Sprite)\n    public icon: Sprite = null!;\n    @property(Label)\n    public itemName: Label = null!;\n    @property(Label)\n    public itemPrice: Label = null!;\n\n    // data: {id,iconSF,itemName,itemPrice}\n    init(data: Item) {\n        this.id = data.id;\n        this.icon.spriteFrame = data.iconSF;\n        this.itemName.string = data.itemName;\n        this.itemPrice.string = data.itemPrice + '';\n    }\n}\n","import { _decorator, Button, Component, director, Label, Node } from 'cc';\nimport { BackButton } from './BackButton';\nimport { sceneArray } from './SceneList';\nconst { ccclass, property } = _decorator;\n\n@ccclass('ListItem')\nexport class ListItem extends Component {\n\n    public index = -1;\n    public _name = '';\n    public label: Label = null!;\n    public button: Button = null!;\n\n    public onload () {\n\n    }\n\n    public start () {\n        // Your initialization goes here.\n        this.index = this.node.getSiblingIndex();\n        this._name = '';\n        if (this.node){\n            this.label = this.node.getComponentInChildren(Label)!;\n            this.button = this.node.getComponent(Button)!;\n        }\n        this.updateItem(this.index, sceneArray[this.index]);\n    }\n\n    public loadScene () {\n        BackButton.saveOffset();\n        BackButton.saveIndex(this.index);\n        this.button.interactable = false;\n        director.loadScene(this._name, BackButton.refreshButton);\n    }\n\n    public updateItem (idx: number, name: string) {\n        this.index = idx;\n        this._name = name;\n        this.label.string = name;\n    }\n}\n","import { _decorator, Component, Node } from \"cc\";\nconst { ccclass, property } = _decorator;\nimport { MenuSidebar } from \"./MenuSidebar\";\n\n@ccclass\nexport class MainMenu extends Component{\n    @property(MenuSidebar)\n    public sidebar: MenuSidebar | null = null;\n    @property(Node)\n    public roller: Node | null= null;\n    public panelWidth = 0;\n    public tabSwitchDuration= 0;\n\n    public curPanelIdx = 0;\n\n    // use this for initialization\n    onLoad() {\n        this.sidebar.init(this);\n        this.curPanelIdx = 0;\n        const pos = this.roller.position;\n        this.roller.setPosition(this.curPanelIdx * -this.panelWidth, pos.y, pos.z);\n    }\n\n    switchPanel(idx: number) {\n        this.curPanelIdx = idx;\n    }\n}\n\n\n","import { _decorator, Component, SpriteFrame, Prefab, Node } from \"cc\";\nimport { TabCtrl } from \"./TabCtrl\";\nimport { MainMenu } from \"./MainMenu\";\nconst { ccclass, property } = _decorator;\n\n@ccclass\nexport class MenuSidebar extends Component{\n    @property([SpriteFrame])\n    public tabIcons: SpriteFrame[] = [];\n    @property(Prefab)\n    public tabPrefab:Prefab | null = null;\n    @property(Node)\n    public container: Node | null = null;\n    @property(Node)\n    public highlight: Node | null = null;\n    @property\n    public tabWidth = 0;\n\n    public curTabIdx = -1;\n    public tabs: TabCtrl[] = [];\n    public mainMenu: MainMenu | null = null;\n    public tabSwitchDuration = -1;\n\n    // use this for initialization\n    init(mainMenu: MainMenu) {\n        this.mainMenu = mainMenu;\n        this.tabSwitchDuration = mainMenu.tabSwitchDuration;\n        this.curTabIdx = 0;\n        this.tabs = [];\n        for (let i = 0; i < this.tabIcons.length; ++i) {\n            let iconSF = this.tabIcons[i];\n            let tab = cc.instantiate(this.tabPrefab).getComponent(TabCtrl);\n            this.container.addChild(tab.node);\n            tab.init({\n                sidebar: this,\n                idx: i,\n                iconSF: iconSF\n            });\n            this.tabs[i] = tab;\n        }\n        this.tabs[this.curTabIdx].turnBig();\n        const pos = this.highlight.position;\n        this.highlight.setPosition(this.curTabIdx * this.tabWidth, pos.y, pos.z);\n    }\n\n    tabPressed(idx: number) {\n        for (let i = 0; i < this.tabs.length; ++i) {\n            let tab = this.tabs[i];\n            if (tab.idx === idx) {\n                tab.turnBig();\n            } else if (this.curTabIdx === tab.idx) {\n                tab.turnSmall();\n            }\n        }\n        this.curTabIdx = idx;\n        // let highlightMove = cc.moveTo(this.tabSwitchDuration, cc.p(this.curTabIdx * this.tabWidth)).easing(cc.easeQuinticActionInOut());\n        // this.highlight.stopAllActions();\n        // this.highlight.runAction(highlightMove);\n        this.mainMenu.switchPanel(this.curTabIdx);\n    }\n}\n","/**\n * UI  v3.0  node.layer \n * Creator  layer  UI UI \n *  UI  layer .\n * \n * UI rendering has changed in v3.0 to use node.layer to determine visibility. \n * To ensure consistent performance after upgrading old projects. \n * Creator will dynamically assign an unused layer to the UI node in the persist node at \n * runtime to avoid conflicts between the layer of UI in the persist node and the \n * layer of other UI in the scene. You can remove this script when you \n * are sure there is no conflict\n */\n\nimport { _decorator, Node, director, Director, game, BaseNode, Canvas, Camera } from 'cc';\nimport { EDITOR } from 'cc/env';\n\nconst customLayerMask = 0x000fffff;\nconst builtinLayerMask = 0xfff00000;\n\ndirector.on(Director.EVENT_AFTER_SCENE_LAUNCH, () => {\n    const roots = director.getScene()?.children as BaseNode[];\n    let allCanvases = director.getScene()?.getComponentsInChildren(Canvas) as Canvas[];\n    if (allCanvases.length <= 1) return;\n    allCanvases = allCanvases.filter(x => !!x.cameraComponent);\n\n    let allCameras = director.getScene()?.getComponentsInChildren(Camera) as Camera[];\n    let usedLayer = 0;\n    allCameras.forEach(x => usedLayer |= (x.visibility & customLayerMask));\n\n    const persistCanvas: Canvas[] = [];\n    for (let i = 0, l = roots.length; i < l; i++) {\n        const root = roots[i];\n        if (!game.isPersistRootNode(root)) continue;\n        const canvases = root.getComponentsInChildren(Canvas);\n        if (canvases.length === 0) continue;\n        persistCanvas.push(...canvases.filter(x => !!x.cameraComponent));\n    }\n\n    persistCanvas.forEach((val) => {\n        const isLayerCollided = allCanvases.find(x => x !== val && (x.cameraComponent!.visibility & val.cameraComponent!.visibility & customLayerMask));\n        if (isLayerCollided) {\n            const availableLayers = ~usedLayer;\n            const lastAvailableLayer = availableLayers & ~(availableLayers - 1);\n            val.cameraComponent!.visibility = lastAvailableLayer | (val.cameraComponent!.visibility & builtinLayerMask);\n            setChildrenLayer(val.node, lastAvailableLayer);\n            usedLayer |= availableLayers;\n        }\n    });\n});\n\nfunction setChildrenLayer (node: Node, layer: number) {\n    for (let i = 0, l = node.children.length; i < l; i++) {\n        node.children[i].layer = layer;\n        setChildrenLayer(node.children[i], layer);\n    }\n}\n\nlet setParentEngine = Node.prototype.setParent;\n\nif(!EDITOR) {\n    Node.prototype.setParent = function(value, keepWorldTransform) {\n        setParentEngine.call(this, value, keepWorldTransform);\n        if (!value) return;\n        // find canvas\n        let layer = getCanvasCameraLayer(this);\n        if (layer) {\n            this.layer = layer;\n            setChildrenLayer(this, layer);\n        }\n    }\n}\n\nfunction getCanvasCameraLayer (node: Node) {\n    let layer = 0;\n    let canvas = node.getComponent(Canvas);\n    if (canvas && canvas.cameraComponent) {\n        if (canvas.cameraComponent.visibility & canvas.node.layer) {\n            layer = canvas.node.layer;\n        } else {\n            layer = canvas.cameraComponent.visibility & ~(canvas.cameraComponent.visibility - 1);\n        }\n        return layer;\n    }\n    if (node.parent) {\n        layer = getCanvasCameraLayer(node.parent);\n    }\n    return layer;\n}\n","import { _decorator, Component, Vec3, Color, UIRenderable } from \"cc\";\nconst { ccclass, property } = _decorator;\n\n@ccclass\nexport class PanelTransition extends Component {\n    @property\n    public duration = 0;\n\n    public outOfWorld = new Vec3();\n\n    private _color = new Color();\n\n     // use this for initialization\n    onLoad() {\n        this.outOfWorld = new Vec3(3000, 0, 0);\n        this.node.setPosition(this.outOfWorld);\n        // let cbFadeOut = cc.callFunc(this.onFadeOutFinish, this);\n        // let cbFadeIn = cc.callFunc(this.onFadeInFinish, this);\n        // this.actionFadeIn = cc.sequence(cc.spawn(cc.fadeTo(this.duration, 255), cc.scaleTo(this.duration, 1.0)), cbFadeIn);\n        // this.actionFadeOut = cc.sequence(cc.spawn(cc.fadeTo(this.duration, 0), cc.scaleTo(this.duration, 2.0)), cbFadeOut);\n        this.node.on('fade-in', this.startFadeIn, this);\n    }\n\n    startFadeIn() {\n        this.node.setPosition(0, 0, 0);\n        this.node.setScale(2, 2, 2);\n        const renderComp = this.node.getComponent(UIRenderable)!;\n        this._color.set(renderComp.color);\n        this._color.a = 0;\n        renderComp.color = this._color;\n        // this.node.runAction(this.actionFadeIn);\n    }\n\n    onFadeOutFinish() {\n        this.node.setPosition(this.outOfWorld);\n    }\n}\n","import { _decorator, Component, Node, Enum } from \"cc\";\n\nexport enum PanelType {\n  Home = -1,\n  Shop = -1,\n};\n\nEnum(PanelType);\n","import { _decorator, Component, Node, systemEvent, SystemEventType, Touch, Vec2, Vec3, loader, Sprite, math, Animation } from \"cc\";\nconst { ccclass, property } = _decorator;\n\n// \nconst TOUCH_RADIUS = 400;\nconst ROLE_MOVE_FRAME = 0.2;\nconst _tempPos = new Vec3();\nconst _tempDelta = new Vec2();\nconst Horizontal = new Vec2(1, 0);\nconst MOVE_DELTA = 0.2;\n\n@ccclass(\"RockerCtrl\")\nexport class RockerCtrl extends Component {\n    @property(Node)\n    ctrlSprite: Node = null!;\n    @property(Node)\n    role: Node = null!;\n    @property(Vec3)\n    originPos = new Vec3();\n\n    private _isTouch = false;\n    private _touchPos = new Vec2();\n    private _startPos = new Vec2();\n    private _movePos = new Vec2();\n    private _animComp: Animation = null!;\n    private _animState = 'idle';\n\n    start () {\n        this.ctrlSprite.setPosition(this.originPos);\n        _tempPos.set(0, 90, 0);\n        this.role.eulerAngles = _tempPos;\n        this._animComp = this.role.getComponentInChildren(Animation)!;\n        systemEvent.on(SystemEventType.TOUCH_START, this.touchStart, this);\n        systemEvent.on(SystemEventType.TOUCH_MOVE, this.touchMove, this);\n        systemEvent.on(SystemEventType.TOUCH_END, this.touchEnd, this);\n    }\n\n    onDestroy() {\n        systemEvent.off(SystemEventType.TOUCH_START, this.touchStart, this);\n        systemEvent.off(SystemEventType.TOUCH_MOVE, this.touchMove, this);\n        systemEvent.off(SystemEventType.TOUCH_END, this.touchEnd, this);\n    }\n\n    touchStart(touch: Touch){\n        this.changeState('cocos_anim_run');\n        touch.getUILocation(this._startPos);\n        const distance = this._startPos.length();\n        if (distance < TOUCH_RADIUS) {\n            this._touchPos.set(this._startPos);\n            this._movePos.set(this._startPos);\n            _tempPos.set(this.ctrlSprite.position);\n            this.ctrlSprite.setWorldPosition(this._startPos.x, this._startPos.y, _tempPos.z);\n            this._isTouch = true;\n        }\n    }\n\n    touchMove(touch: Touch){\n        if(!this._isTouch){\n            return;\n        }\n\n        touch.getUILocation(this._movePos);\n        Vec2.subtract(_tempDelta, this._movePos, this._touchPos);\n        // \n        const deltaRadian = _tempDelta.angle(Horizontal);\n        const angle = deltaRadian * 180 / Math.PI;\n        const rot = this.role.eulerAngles;\n        _tempPos.set(rot.x, 90 + (Math.sign(_tempDelta.y)) * angle, rot.z);\n        this.role.eulerAngles = _tempPos;\n\n        // \n        _tempDelta.multiply2f(MOVE_DELTA, MOVE_DELTA);\n        Vec2.add(this._movePos, this._startPos, _tempDelta);\n        const distance = this._movePos.length();\n\n        // \n        if(distance > TOUCH_RADIUS){\n            const radian = this._movePos.angle(Horizontal);\n            const x = Math.cos(radian) * TOUCH_RADIUS;\n            const y = Math.sin(radian) * TOUCH_RADIUS;\n            this._movePos.set(x, y);\n        }\n\n        this.ctrlSprite.setWorldPosition(this._movePos.x, this._movePos.y, 0);\n        this._touchPos.set(this._movePos);\n    }\n\n    touchEnd(touch: Touch){\n        this._isTouch = false;\n        this.changeState('cocos_anim_idle');\n        this.ctrlSprite.setPosition(this.originPos);\n    }\n\n    changeState(name: string){\n        if(this._animState === name){\n            return;\n        }\n\n        this._animComp.play(name);\n        this._animState = name;\n    }\n\n    update(){\n        if(!this._isTouch){\n            return;\n        }\n\n        _tempPos.set(0, 0, ROLE_MOVE_FRAME);\n        this.role.translate(_tempPos);\n    }\n}\n","import { _decorator, Component, instantiate, Node, Prefab } from 'cc';\nconst { ccclass, property } = _decorator;\n\nexport const sceneArray: string[] = [];\n\n@ccclass('SceneManager')\nexport class SceneManager extends Component {\n\n    @property ({ type: Prefab })\n    public itemPrefab: Prefab | null  = null;\n\n    public onLoad () {\n        if (this.itemPrefab){\n            for (let i = 0; i < sceneArray.length; i++ ) {\n                const item = instantiate(this.itemPrefab);\n                this.node.addChild(item);\n            }\n        }\n    }\n\n    public start () {\n    }\n}\n","\nimport { _decorator, Component, Sprite, Node, Animation } from \"cc\";\nconst { ccclass, property } = _decorator;\nimport { HomeUI } from \"./HomeUI\";\nimport { ChargeUI } from \"./ChargeUI\";\nimport { PanelType } from \"./PanelType\";\n\n@ccclass\nexport class ShopUI extends Component {\n    @property(Animation)\n    public anim: Animation = null!;\n    @property(Sprite)\n    public figure: Sprite = null!;\n    @property(Node)\n    public btnsNode: Node = null!;\n    @property(ChargeUI)\n    public chargeUI: ChargeUI = null!;\n\n    private _panelType = PanelType.Home;\n    private _home: HomeUI = null!;\n\n    // use this for initialization\n    init(home: HomeUI, panelType: PanelType) {\n        this._home = home;\n        this.node.active = false;\n        this.anim.play('shop_reset');\n        this._panelType = panelType;\n        // this.figure.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(1, 1, 0.96), cc.scaleTo(1, 1, 1))));\n        this.chargeUI.init(home, this.btnsNode);\n    }\n\n    show() {\n        this.node.active = true;\n        this.anim.play('shop_intro');\n    }\n\n    hide() {\n        this.anim.play('shop_outro');\n    }\n\n    onFinishShow() {\n        this._home.curPanel = this._panelType;\n    }\n\n    onFinishHide() {\n        this.node.active = false;\n    }\n}\n","import { _decorator, Component, Animation, Button, Node } from \"cc\";\nconst { ccclass, property } = _decorator;\n\n@ccclass\nexport class SubBtnsUI extends Component {\n    @property(Animation)\n    public subBtnsAnim: Animation = null!;\n    @property(Button)\n    public btnShowSub: Button = null!;\n    @property(Button)\n    public btnHideSub: Button = null!;\n    @property(Node)\n    public btnContainer: Node = null!;\n\n    // use this for initialization\n    onLoad() {\n        this.btnShowSub.node.active = true;\n        this.btnHideSub.node.active = false;\n    }\n\n    showSubBtns() {\n        this.btnContainer.active = true;\n        this.subBtnsAnim.play('sub_pop');\n    }\n\n    hideSubBtns() {\n        this.subBtnsAnim.play('sub_fold');\n    }\n\n    onFinishAnim(finishFold: boolean) {\n        this.btnShowSub.node.active = finishFold;\n        this.btnHideSub.node.active = !finishFold;\n    }\n}\n","import { _decorator, Component, Sprite, Node, Animation, SpriteFrame } from \"cc\";\nimport { MenuSidebar } from \"./MenuSidebar\";\nconst { ccclass, property } = _decorator;\n\nexport interface ITabCtrlInfo{\n    sidebar: MenuSidebar;\n    idx: number;\n    iconSF: SpriteFrame;\n}\n\n@ccclass\nexport class TabCtrl extends Component {\n    @property\n    public idx = 0;\n    @property(Sprite)\n    public icon: Sprite | null = null;\n    @property(Node)\n    public arrow: Node | null = null;\n    @property(Animation)\n    public anim: Animation | null = null;\n\n    public sidebar: MenuSidebar | null = null;\n\n    // use this for initialization\n    init(tabInfo: ITabCtrlInfo) { // sidebar, idx, iconSF\n        this.sidebar = tabInfo.sidebar;\n        this.idx = tabInfo.idx;\n        this.icon.spriteFrame = tabInfo.iconSF;\n        this.node.on('touchstart', this.onPressed.bind(this), this.node);\n        this.arrow.scale = cc.p(0, 0);\n    }\n\n    onPressed() {\n        this.sidebar.tabPressed(this.idx);\n    }\n\n    turnBig() {\n        this.anim.play('tab_turn_big');\n    }\n\n    turnSmall() {\n        this.anim.play('tab_turn_small');\n    }\n}\n"]}